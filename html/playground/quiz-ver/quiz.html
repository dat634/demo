<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study App - Azota Style</title>

<!-- START STYLE -->
<style>
/* START STYLE */
/* ===== STYLE: tr·∫Øng s√°ng, hover, responsive, ch·ªçn n·ªïi ===== */
body{
  font-family: sans-serif;
  margin:0; padding:0;
  display:flex; flex-direction:column; align-items:center;
  min-height:100vh; background:#f4f4f4;
}
#container{
  max-width:900px; width:95%; margin:20px auto;
  background:white; padding:20px; border-radius:10px;
  box-shadow:0 2px 10px rgba(0,0,0,0.1); min-height: 50vh; justify-content: space-between; display: flex; flex-direction: column; margin-top: 5%; justify-items: center;
}
#question{font-size:1.2em; font-weight:600; margin-bottom:16px;}
#options{display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:10px; margin-top:3px;}
.option{
  padding:12px; border:1px solid #ccc; border-radius:6px;
  cursor:pointer; transition:0.3s; background:white;
  display:flex; align-items:center;
}
.option.selected{border-color:#007BFF; background:#e0f0ff;}
.option.correct{border-color:#28a745; background:#c8f7c5;}
.option.wrong{border-color:#dc3545; background:#f7c5c5;}
.option div:first-child{font-weight:700; margin-right:8px;}
#controls{display:flex; justify-content:flex-end; gap:10px; margin-bottom:10px;}
button{padding:8px 16px; border:none; border-radius:6px; cursor:pointer; font-weight:600; transition:0.3s;}
#btnConfirm{background:#007BFF; color:white;}
#btnSkip{background:#6c757d; color:white;}
#progress{font-size:0.9em; color:#555; margin-bottom:10px;}
#toast{
  position:fixed; bottom:20px; left:50%; transform:translateX(-50%);
  background:#333; color:white; padding:12px 20px; border-radius:6px;
  opacity:0; pointer-events:none; transition:0.3s; z-index:1000;
}
#toast.show{opacity:1;}
@media(max-width:500px){#options{grid-template-columns:1fr;}}
/* END STYLE */

</style>
</head>

<body>
<!-- START HTML -->
   
<div id="container">
  <div id="question">Ch∆∞a c√≥ c√¢u h·ªèi</div>
  <div id="options"></div>
  <div id="controls">
    <button id="btnSkip">B·ªè qua</button>
    <button id="btnConfirm">X√°c nh·∫≠n</button>
  </div>
  <div id="progress"></div>
</div>
<div id="toast"></div>

<!-- END HTML -->

<!-- START SCRIPT -->
<script>
  const multipleChoice = [
    // ==== COPY C√ÇU H·ªéI MCQ ·ªû ƒê√ÇY ====
    {question:"N·ªôi l·ª±c trong ƒë·ªãa ch·∫•t h·ªçc l√† nh·ªØng l·ª±c sinh ra ·ªü b√™n trong l√µi Tr√°i ƒê·∫•t...", answers:[

      "N·ªôi l·ª±c l√† l·ª±c do con ng∆∞·ªùi t√°c ƒë·ªông l√™n m·∫∑t ƒë·∫•t.",
      "Hi·ªán t∆∞·ª£ng ƒë"],correct:[0,2]},]
  // ==== COPY C√ÇU H·ªéI ƒê√öNG SAI ·ªû ƒê√ÇY ====
  const trueFalse = [{id:426267818, text:"Ngo·∫°i l·ª±c l√† l·ª±c sinh ra tr√™n b·ªÅ m·∫∑t Tr√°i ƒê·∫•t. Ngo·∫°i l·ª±c c√≥ xu h∆∞·ªõng b√≥c m√≤n nh·ªØng n∆°i cao, d·ªëc v√† b·ªìi t·ª• ·ªü nh·ªØng n∆°i th·∫•p, tho·∫£i tr√™n b·ªÅ m·∫∑t Tr√°i ƒê·∫•t. ƒê·ªãa h√¨nh do ngo·∫°i l·ª±c t·∫°o th√†nh r·∫•t ƒëa d·∫°ng v√† ph·ªï bi·∫øn tr√™n Tr√°i ƒê·∫•t.", parts:[
      {label:'a', text:"Ngo·∫°i l·ª±c t√°c ƒë·ªông ƒë·∫øn ƒë·ªãa h√¨nh b·ªÅ m·∫∑t Tr√°i ƒê·∫•t th√¥ng qua c√°c qu√° tr√¨nh kh√°c nhau: phong ho√°, b√≥c m√≤n, v·∫≠n chuy·ªÉn v√† ng∆∞ng t·ª•.", correct:false},
      {label:'b', text:"Ngu·ªìn nƒÉng l∆∞·ª£ng sinh ra ngo·∫°i l·ª±c ch·ªß y·∫øu l√† ngu·ªìn nƒÉng l∆∞·ª£ng do s·ª± ph√¢n h·ªßy c√°c nguy√™n t·ªë ph√≥ng x·∫°.", correct:false},
      {label:'c', text:"Phong ho√° ho√° h·ªçc di·ªÖn ra m·∫°nh trong ƒëi·ªÅu ki·ªán kh√≠ h·∫≠u n√≥ng ·∫©m. ·ªû nh·ªØng n∆°i c√≥ ƒë√° d·ªÖ ho√† tan nh∆∞ ƒë√° v√¥i, th·∫°ch cao,.. phong ho√° ho√° h·ªçc th∆∞·ªùng t·∫°o n√™n d·∫°ng ƒë·ªãa h√¨nh cac-xt∆°.", correct:true},
      {label:'d', text:"C·ªôt ƒë√°, th√°p ƒë√°, n·∫•m ƒë√° l√† s·∫£n ph·∫©m c·ªßa qu√° tr√¨nh b√≥c m√≤n do gi√≥, th∆∞·ªùng di·ªÖn ra m·∫°nh ·ªü nh·ªØng v√πng kh√≠ h·∫≠u kh√¥ h·∫°n.", correct:true}
    ]},
    {id:426267819, text:"ƒê·ªãa h√¨nh b·ªÅ m·∫∑t Tr√°i ƒê·∫•t bao g·ªìm c√°c d·∫°ng nh∆∞ n√∫i, ƒë·ªìi, ƒë·ªìng b·∫±ng, cao nguy√™n, thung l≈©ng, v√† c√°c d·∫°ng ƒë·ªãa h√¨nh bi·ªÉn, sa m·∫°c; ch√∫ng ƒë∆∞·ª£c h√¨nh th√†nh b·ªüi n·ªôi l·ª±c v√† ngo·∫°i l·ª±c...", parts:[
      {label:'a', text:"N·ªôi l·ª±c l√† l·ª±c ph√°t sinh t·ª´ b√™n trong Tr√°i ƒê·∫•t.", correct:true},
      {label:'b', text:"Ngu·ªìn nƒÉng l∆∞·ª£ng sinh ra n·ªôi l·ª±c ch·ªß y·∫øu l√† ngu·ªìn nƒÉng l∆∞·ª£ng c·ªßa b·ª©c x·∫° m·∫∑t tr·ªùi.", correct:false},
      {label:'c', text:"Hi·ªán t∆∞·ª£ng ƒë·ª©t g√£y x·∫£y ra ·ªü nh·ªØng v√πng ƒë√° c√≥ ƒë·ªô d·∫ªo cao, t·∫°o ra c√°c h·∫ªm v·ª±c, thung l≈©ng, ƒë·ªãa l≈©y, ƒë·ªãa h√†o.", correct:false},
      {label:'d', text:"N·ªôi l·ª±c t√°c ƒë·ªông ƒë·∫øn ƒë·ªãa h√¨nh b·ªÅ m·∫∑t Tr√°i ƒê·∫•t th·ªÉ hi·ªán qua c√°c hi·ªán t∆∞·ª£ng bi·ªÉn ti·∫øn, bi·ªÉn tho√°i, u·ªën n·∫øp, ƒë·ª©t g√£y.", correct:true}
    ]},
    {id:426267820, text:"N·ªôi l·ª±c trong ƒë·ªãa ch·∫•t h·ªçc l√† nh·ªØng l·ª±c sinh ra ·ªü b√™n trong l√µi Tr√°i ƒê·∫•t...", parts:[
      {label:'a', text:"N·ªôi l·ª±c l√† l·ª±c ph√°t sinh t·ª´ b√™n trong Tr√°i ƒê·∫•t.", correct:true},
      {label:'b', text:"N·ªôi l·ª±c l√† l·ª±c do con ng∆∞·ªùi t√°c ƒë·ªông l√™n m·∫∑t ƒë·∫•t.", correct:false},
      {label:'c', text:"Hi·ªán t∆∞·ª£ng ƒë·ª©t g√£y x·∫£y ra ·ªü nh·ªØng v√πng ƒë√° c·ª©ng.", correct:true},
      {label:'d', text:"K·∫øt qu·∫£ c·ªßa v·∫≠n ƒë·ªông n·ªôi l·ª±c theo ph∆∞∆°ng th·∫≥ng ƒë·ª©ng l√† n√∫i u·ªën n·∫øp.", correct:false}
    ]},
    {id:426267821, text:"‚ÄúNgo·∫°i l·ª±c l√† c√°c l·ª±c c√≥ ngu·ªìn g·ªëc t·ª´ b√™n ngo√†i, ho·∫°t ƒë·ªông tr√™n b·ªÅ m·∫∑t Tr√°i ƒê·∫•t, ch·ªß y·∫øu do nƒÉng l∆∞·ª£ng b·ª©c x·∫° M·∫∑t Tr·ªùi g√¢y ra...‚Äù", parts:[
      {label:'a', text:"Ngo·∫°i l·ª±c l√† l·ª±c sinh ra t·ª´ b·ª©c x·∫° c·ªßa M·∫∑t tr·ªùi.", correct:false},
      {label:'b', text:"C√°c t√°c nh√¢n ngo·∫°i l·ª±c bao g·ªìm: kh√≠ h·∫≠u, s√≥ng bi·ªÉn, sinh v·∫≠t.", correct:true},
      {label:'c', text:"Phong ho√° l√≠ h·ªçc x·∫£y ra m·∫°nh ·ªü c√°c hoang m·∫°c do bi√™n ƒë·ªô nhi·ªát ƒë·ªô ng√†y ƒë√™m l·ªõn.", correct:true},
      {label:'d', text:"D·∫°ng ƒë·ªãa h√¨nh n·∫•m ƒë√° t·∫°o th√†nh do qu√° tr√¨nh x√¢m th·ª±c.", correct:false}
    ]},
    {id:426267822, text:"‚ÄúTh·∫°ch quy·ªÉn l√† ph·∫ßn ngo√†i c√πng c·ªßa Tr√°i ƒê·∫•t, bao g·ªìm v·ªè Tr√°i ƒê·∫•t v√† ph·∫ßn tr√™n c·ªßa l·ªõp Manti...‚Äù", parts:[
      {label:'a', text:"Th·∫°ch quy·ªÉn g·ªìm v·ªè Tr√°i ƒê·∫•t v√† ph·∫ßn tr√™n c·ªßa l·ªõp Manti.", correct:true},
      {label:'b', text:"Th·∫°ch quy·ªÉn l√† ph·∫ßn nh√¢n trong c·ªßa Tr√°i ƒê·∫•t, ·ªü tr·∫°ng th√°i n√≥ng ch·∫£y.", correct:false},
      {label:'c', text:"S·ª± di chuy·ªÉn c·ªßa c√°c m·∫£ng th·∫°ch quy·ªÉn c√≥ th·ªÉ g√¢y ra ƒë·ªông ƒë·∫•t v√† n√∫i l·ª≠a.", correct:true},
      {label:'d', text:"Th·∫°ch quy·ªÉn ch·ªâ t·ªìn t·∫°i ·ªü ph·∫ßn l·ª•c ƒë·ªãa, kh√¥ng c√≥ d∆∞·ªõi ƒë·∫°i d∆∞∆°ng.", correct:false}
    ]},
    {id:426267823, text:"‚ÄúTr√™n Tr√°i ƒê·∫•t, ƒë·ªãa h√¨nh li√™n t·ª•c thay ƒë·ªïi do s·ª± t√°c ƒë·ªông ƒë·ªìng th·ªùi c·ªßa c√°c l·ª±c b√™n trong v√† b√™n ngo√†i...‚Äù", parts:[
      {label:'a', text:"Ngo·∫°i l·ª±c l√† l·ª±c c√≥ ngu·ªìn g·ªëc t·ª´ b√™n ngo√†i Tr√°i ƒê·∫•t, t√°c ƒë·ªông tr·ª±c ti·∫øp l√™n b·ªÅ m·∫∑t ƒë·ªãa h√¨nh.", correct:true},
      {label:'b', text:"Nguy√™n nh√¢n ch·ªß y·∫øu h√¨nh th√†nh ngo·∫°i l·ª±c l√† do nƒÉng l∆∞·ª£ng c·ªßa b·ª©c x·∫° M·∫∑t Tr·ªùi.", correct:true},
      {label:'c', text:"Ngo·∫°i l·ª±c l√†m thay ƒë·ªïi ƒë·ªãa h√¨nh Tr√°i ƒê·∫•t th√¥ng qua c√°c qu√° tr√¨nh phong h√≥a, b√≥c m√≤n, v·∫≠n chuy·ªÉn v√† b·ªìi t·ª•.", correct:true},
      {label:'d', text:"Ngo·∫°i l·ª±c ch·ªâ l√†m cho ƒë·ªãa h√¨nh Tr√°i ƒê·∫•t ng√†y c√†ng cao l√™n, kh√¥ng g√¢y ra s·ª± san b·∫±ng hay b·ªìi t·ª• v·∫≠t ch·∫•t.", correct:false}
    ]}];
/* ====== JS Logic: y√™u c·∫ßu d·ªØ li·ªáu c√≥ 'correct' cho MCQ (index 0..3),
          v√† TF parts ph·∫£i c√≥ boolean 'correct'. ====== */

/* ==== D√°n d·ªØ li·ªáu v√†o 2 m·∫£ng n√†y trong file c·ªßa b·∫°n ==== */
 // m·ªói ph·∫ßn t·ª≠: { question: "...", answers: ["A","B","C","D"], correct: 0 }
      /* m·ªói ph·∫ßn t·ª≠: { text: "...", parts: [
                                 { text: "...", correct: true/false }, ... (4 ph·∫ßn)
                               ] } */
/* ======================================================= */

///// State /////
// ===== D·ªØ li·ªáu m·∫´u =====
let mode='mcq', mcqIndex=0, tfIndex=0, waitingForConfirm=false, confirmStep=0;
let selectedEl=null, displayedMap=[], tfSelections=[null,null,null,null];

const qTitle=document.getElementById('question');
const optsWrap=document.getElementById('options');
const toastEl=document.getElementById('toast');
const progressEl=document.getElementById('progress');
const btnConfirm=document.getElementById('btnConfirm');
const btnSkip=document.getElementById('btnSkip');

const toneOk = (()=>{ try{ const a=new Audio(); a.src="../onthi/snd_fragment_retrievewav-14728.mp3"; return a;}catch(e){return null}})(); const toneBad = (()=>{ try{ const a=new Audio(); a.src=" ../onthi/wrong-47985.mp3" ; return a;}catch(e){return null}})();
// ===== Helpers =====
function shuffle(arr){ return arr.map(v=>({v, r:Math.random()})).sort((a,b)=>a.r-b.r).map(x=>x.v); }
function showToast(msg, ms=1100){ toastEl.textContent=msg; toastEl.classList.add('show'); clearTimeout(toastEl._t); toastEl._t=setTimeout(()=>toastEl.classList.remove('show'),ms); }

// ===== MCQ =====
function renderMCQ(){
  waitingForConfirm=false; confirmStep=0; selectedEl=null; displayedMap=[];
  if(mcqIndex>=multipleChoice.length){ mode='tf'; tfIndex=0; renderTF(); return; }
  const q=multipleChoice[mcqIndex];
  qTitle.textContent=q.question;
  const arr=q.answers.map((t,i)=>({t,i}));
  const shuffled=shuffle(arr);
  displayedMap=shuffled.map(x=>x.i);
  optsWrap.innerHTML='';
  shuffled.forEach((item,pos)=>{
    const d=document.createElement('div'); d.className='option'; d.tabIndex=0; d.dataset.pos=pos;
    d.innerHTML=`<div>${String.fromCharCode(65+pos)}.</div><div>${item.t}</div>`;
    d.addEventListener('click',()=> selectOption(d));
    optsWrap.appendChild(d);
  });
  progressEl.textContent=`MCQ ‚Äî C√¢u ${mcqIndex+1}/${multipleChoice.length}`;
}

// ===== TF =====
function renderTF(){
  waitingForConfirm=false; confirmStep=0; selectedEl=null; tfSelections=[null,null,null,null];
  const q=trueFalse[tfIndex];
  qTitle.textContent=q.text;
  optsWrap.innerHTML='';
  q.parts.forEach((p,i)=>{
    const pdiv=document.createElement('div'); pdiv.className='option';
    pdiv.innerHTML=`<div>${p.label||String.fromCharCode(97+i)}.</div><div>${p.text}</div>`;
    pdiv.addEventListener('click',()=> toggleTF(i));
    optsWrap.appendChild(pdiv);
  });
  updateTFUI();
  progressEl.textContent=`TF ‚Äî C√¢u ${tfIndex+1}/${trueFalse.length}`;
}

// ===== Option selection =====
function selectOption(el){
  if(waitingForConfirm) return;
  document.querySelectorAll('.option').forEach(o=>o.classList.remove('selected'));
  el.classList.add('selected'); selectedEl=el;
}

// ===== TF toggle =====
function toggleTF(index){
  if(mode!=='tf') return;
  if(tfSelections[index]===null) tfSelections[index]=true;
  else if(tfSelections[index]===true) tfSelections[index]=false;
  else tfSelections[index]=true;
  toneOk && toneOk.play().catch(()=>{});
  updateTFUI();
}

function updateTFUI(){
  const divs=optsWrap.querySelectorAll('.option');
  divs.forEach((div,i)=>{
    div.style.backgroundColor=tfSelections[i]===null?'transparent':(tfSelections[i]? '#c8f7c5':'#f7c5c5');
  });
}

// ===== Confirm / Skip =====
function handleConfirm(){
  if(mode==='mcq'){
    if(!selectedEl){ showToast('Ch∆∞a ch·ªçn ƒë√°p √°n'); return; }
    const displayedPos=Number(selectedEl.dataset.pos);
    const origIndex=displayedMap[displayedPos];
    const q=multipleChoice[mcqIndex];
    const isCorrect=(q.correct===origIndex);
    if(!waitingForConfirm){
      if(isCorrect){ selectedEl.classList.add('correct'); waitingForConfirm=true; confirmStep=1; toneOk&&toneOk.play(); showToast('‚úÖ ƒê√∫ng! Nh·∫•n X√°c nh·∫≠n ƒë·ªÉ sang c√¢u'); }
      else{ selectedEl.classList.add('wrong'); toneBad&&toneBad.play(); showToast('‚ùå Sai r·ªìi ‚Äî th·ª≠ l·∫°i',900); setTimeout(()=>{selectedEl.classList.remove('wrong'); selectedEl.classList.remove('selected'); selectedEl=null;},700);}
    } else { confirmStep=0; waitingForConfirm=false; mcqIndex++; renderMCQ(); }
  } else if(mode==='tf'){
    const allChosen=tfSelections.every(v=>v!==null);
    if(!allChosen){ showToast('Ch∆∞a toggle h·∫øt 4 ph·∫ßn'); return; }
    const current=trueFalse[tfIndex];
    const allCorrect=tfSelections.every((v,i)=>v===current.parts[i].correct);
    if(!waitingForConfirm){
      if(allCorrect){ waitingForConfirm=true; confirmStep=1; toneOk&&toneOk.play(); showToast('‚úÖ T·∫•t c·∫£ ƒë√∫ng! Nh·∫•n X√°c nh·∫≠n ƒë·ªÉ sang c√¢u'); }
      else{ toneBad&&toneBad.play(); showToast('‚ùå V·∫´n c√≥ ph·∫ßn sai'); }
    } else { confirmStep=0; waitingForConfirm=false; tfIndex++; tfSelections=[null,null,null,null]; if(tfIndex>=trueFalse.length){ mode='done'; qTitle.textContent='üéâ Ho√†n th√†nh t·∫•t c·∫£ c√¢u h·ªèi!'; optsWrap.innerHTML=''; progressEl.textContent=''; } else renderTF();}
  }
}

function handleSkip(){
  if(mode==='mcq'){ mcqIndex++; renderMCQ(); }
  else if(mode==='tf'){ tfIndex++; renderTF(); tfSelections=[null,null,null,null]; }
}

// ===== Key handler =====
document.addEventListener('keydown',(e)=>{
  if(e.key>='1' && e.key<='4'){
    const idx=Number(e.key)-1;
    if(mode==='mcq'){ const opt=document.querySelectorAll('.option')[idx]; if(opt) selectOption(opt);}
    else if(mode==='tf') toggleTF(idx);
  } else if(e.key==='Enter'){ handleConfirm(); }
});

btnConfirm.addEventListener('click',handleConfirm);
btnSkip.addEventListener('click',handleSkip);

// ===== Start =====
function startSession(){
  shuffle(multipleChoice); shuffle(trueFalse); mcqIndex=0; tfIndex=0; mode='mcq'; renderMCQ();
}
window.study_start=startSession;
if(Array.isArray(multipleChoice)&&multipleChoice.length>0) startSession();
else { qTitle.textContent='Ch∆∞a c√≥ d·ªØ li·ªáu multipleChoice ‚Äî d√°n d·ªØ li·ªáu v√†o m·∫£ng multipleChoice'; optsWrap.innerHTML=''; }
</script>

</body>
</html>
