<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HọcVui — Flashcard (Menu → Study → Test)</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../../../css/flashcard.css">
</head>
<body>
  <div class="header">
    <div class="brand">Học<span style="background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent">Vui</span></div>
    <div class="nav">
      <div class="small" id="userName">—</div>
      <a class="small" href="#">Study</a>
      <a class="small" href="#">Game</a>
      <a class="small" href="#">Advance</a>
      <a class="small" href="#">Setting</a>
    </div>
  </div>

  <div class="container">

    <!-- MENU -->
    <div id="menuStage" class="panel menu">
      <h1>Chọn Level & Bắt đầu</h1>
      <div class="controls">
        <label class="small" style="color:var(--muted);margin-right:8px">Level:</label>
        <select id="levelSelect" class="select">
          <option value="all">All</option>
          <option value="A1">A1</option><option value="A2">A2</option>
          <option value="B1">B1</option><option value="B2">B2</option>
          <option value="C1">C1</option><option value="C2">C2</option>
        </select>
        <button id="startBtn" class="btn">Start</button>
      </div>
      <p class="small1" style="max-width:760px;color:var(--muted)">Chọn cấp độ muốn học — trang sẽ load 19 từ để học, sau đó tự chuyển sang phần kiểm tra gồm 10 trắc nghiệm và 5 câu điền từ.</p>
    </div>

    <!-- STUDY -->
    <div id="studyStage" class="stage hidden panel">
      <div style="display:flex;flex-direction:column;align-items:center;gap:10px">
        <div class="card" id="card">
          <div class="card-inner" id="cardInner">
            <div class="face front">
              <div class="word" id="frontWord">...</div>
              <div class="meaning small" id="frontHint">(Nhấn để lật)</div>
            </div>
            <div class="face back">
              <div class="word" id="backWord">...</div>
              <div class="meaning" id="backMeaning">...</div>
            </div>
          </div>
        </div>
        <div class="card-controls">
          <button id="flipBtn" class="btn">Flip</button>
          <button id="nextBtn" class="btn ghost">Next »</button>
          <div class="small">Score: <span id="scoreDisplay">0</span></div>
        </div>
      </div>
    </div>

    <!-- TEST -->
    <div id="testStage" class="stage hidden panel">
      <div class="test-area">
        <div class="question-card" id="questionCard">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div class="q-text" id="questionText">Question</div>
            <div class="timer small" id="timerDisplay">25:00</div>
          </div>
          <div id="optionsWrap" class="options" style="margin-top:12px"></div>
          <div id="fillWrap" style="display:none;margin-top:12px">
            <div class="small" style="text-align:center;margin-bottom:8px;width: 20% !important;">Nhập từ tiếng Anh:</div>
            <div class="input-row">
              <input id="fillInput" placeholder="Type English..." />
              <button id="submitFill" class="btn">Gửi</button>
              <button id="skipBtn" class="btn ghost">Bỏ qua (-2)</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div style="width:100%;max-width:880px;display:flex;flex-direction:column;gap:10px;align-items:center;margin-top:8px">
      <div class="meta">
        <div class="progress"><div id="progressBar" class="progress-bar"></div></div>
        <div class="small" id="posInfo">0 / 19</div>
      </div>
    </div>

  </div>

  <!-- summary overlay -->
  <div class="summary-overlay" id="summaryOverlay" aria-hidden="true">
    <div class="summary-card">
      <div class="summary-title" id="summaryTitle">KẾT QUẢ</div>
      <div style="margin-top:12px;color:#fff">Tổng điểm: <strong id="summaryScore">0</strong></div>
      <div style="margin-top:8px" class="small" id="summaryText">—</div>
      <div style="display:flex;gap:10px;justify-content:center;margin-top:12px">
        <button id="btnRetry" class="btn">Kiểm tra lại</button>
        <button id="btnHome" class="btn ghost">Về màn hình chính</button>
      </div>
    </div>
  </div>

  <!-- firebase scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<script src="../../../js/flashcard.js"></script>
<script src="../../../js/theme_toggle.js"></script>

</body>
</html>
